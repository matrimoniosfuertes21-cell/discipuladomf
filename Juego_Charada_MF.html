<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charada Master - Juego Interactivo</title>
    
    <!-- React y ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel para compilar JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .animate-slideUp { animation: slideUp 0.5s ease-out; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONOS SVG ---
        // Usamos componentes SVG internos para asegurar que funcionen sin librerías externas complejas
        const IconPlay = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
        );
        const IconCheck = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"></polyline></svg>
        );
        const IconX = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        );
        const IconTimer = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
        );
        const IconTrophy = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M8 21h8M12 17v4M7 4h10c0 5-1 9-5 9s-5-4-5-9zM6 4H5a4 4 0 0 0 0 8h1M18 4h1a4 4 0 0 1 0 8h-1"></path></svg>
        );
        const IconSettings = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        );
        const IconUsers = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
        );
        const IconStop = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><rect x="9" y="9" width="6" height="6"></rect></svg>
        );
        const IconRotate = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>
        );
        const IconEdit = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
        );

        const DEFAULT_WORDS = [
            "Suegra", "Ronquido", "Mando", "Edredón", "Basura", 
            "Pañal", "Biberón", "Quincena", "Deuda", "Hipoteca", 
            "Vecino", "Llave", "Cama", "Almohada", "Despertador", 
            "Desayuno", "Chancla", "Sartén", "Lavadora", "Calcetín", 
            "Plancha", "Supermercado", "Carrito", "Lista", "Presupuesto", 
            "Ahorro", "Cita", "Aniversario", "Suegro", "Cuñado", 
            "Yerno", "Nuera", "Tío", "Sobrino", "Padrino", 
            "Madrina", "Invitado", "Regalo", "Sorpresa", "Abrazo", 
            "Beso", "Discusión", "Reconciliación", "Paciencia", "Amor", 
            "Anillo", "Boda", "Vestido", "Traje", "Luna de miel", 
            "Pastor", "Ofrenda", "Diezmo", "Púlpito", "Micro", 
            "Banca", "Himnario", "Coro", "Baterista", "Ujier", 
            "Bienvenida", "Anuncio", "Retiro", "Campamento", "Ayuno", 
            "Vigilia", "Domingo", "Predicha", "Versículo", "Biblia", 
            "Arca", "Diluvio", "Ballena", "Manzana", "Serpiente", 
            "León", "Gigante", "Honda", "Piedra", "Túnica", 
            "Pozo", "Desierto", "Pan", "Vino", "Pez", 
            "Cruz", "Tumba", "Ángel", "Pesebre", "Estrella", 
            "Rey", "Camello", "Oveja", "Pastorcillo", "Burro", 
            "Bautizo", "Agua", "Paloma", "Aceite", "Milagro", 
            "Ornitorrinco", "Perezoso", "Llama", "Alpaca", "Cuy", 
            "Canguro", "Koala", "Panda", "Mapache", "Zorrillo", 
            "Puercoespín", "Erizo", "Armadillo", "Flamenco", "Avestruz", 
            "Pingüino", "Pelícano", "Loro", "Búho", "Murciélago", 
            "Camaleón", "Iguana", "Tortuga", "Cocodrilo", "Rana", 
            "Sapo", "Mosca", "Mosquito", "Abeja", "Avispa", 
            "Hormiga", "Cucaracha", "Grillo", "Araña", "Escorpión", 
            "Cangrejo", "Pulpo", "Medusa", "Tiburón", "Delfín", 
            "Ballena", "Foca", "Morsa", "Nutria", "Castor", 
            "Ardilla", "Conejo", "Ratón", "Hamster", "Gato", 
            "Pizza", "Hamburguesa", "Taco", "Burrito", "Sushi", 
            "Ceviche", "Pollo", "Huevo", "Tocino", "Salchicha", 
            "Jamón", "Queso", "Mantequilla", "Pan", "Tostada", 
            "Cereal", "Leche", "Yogur", "Helado", "Chocolate", 
            "Pastel", "Galleta", "Dona", "Churro", "Palomitas", 
            "Papa", "Camote", "Arroz", "Fideo", "Sopa", 
            "Ensalada", "Tomate", "Lechuga", "Cebolla", "Ajo", 
            "Limón", "Naranja", "Plátano", "Manzana", "Uva", 
            "Fresa", "Sandía", "Piña", "Coco", "Café", 
            "Té", "Refresco", "Agua", "Hielo", "Sal", 
            "Policía", "Bombero", "Médico", "Enfermera", "Dentista", 
            "Veterinario", "Profesor", "Alumno", "Director", "Abogado", 
            "Juez", "Político", "Presidente", "Alcalde", "Soldado", 
            "Piloto", "Azafata", "Chofer", "Taxista", "Mecánico", 
            "Carpintero", "Plomero", "Electricista", "Albañil", "Pintor", 
            "Jardinero", "Cocinero", "Mesero", "Panadero", "Carnicero", 
            "Peluquero", "Sastre", "Zapatero", "Cartero", "Periodista", 
            "Fotógrafo", "Cantante", "Actor", "Payaso", "Mimo", 
            "Mago", "Acróbata", "Atleta", "Entrenador", "Árbitro", 
            "Portero", "Secretaria", "Jefe", "Empleado", "Vendedor", 
            "Cabeza", "Cabello", "Calva", "Frente", "Ceja", 
            "Pestaña", "Ojo", "Oreja", "Nariz", "Moco", 
            "Boca", "Diente", "Lengua", "Saliva", "Barba", 
            "Bigote", "Cuello", "Hombro", "Brazo", "Codo", 
            "Mano", "Dedo", "Uña", "Pecho", "Barriga", 
            "Ombligo", "Espalda", "Pierna", "Rodilla", "Pie", 
            "Talón", "Sombrero", "Gorra", "Lentes", "Corbata", 
            "Camisa", "Polo", "Pantalón", "Falda", "Zapato", 
            "Zapatilla", "Bota", "Abrigo", "Bufanda", "Guante", 
            "Cinturón", "Reloj", "Arete", "Collar", "Perfume", 
            "Superman", "Batman", "Spiderman", "Hulk", "Thor", 
            "Mickey", "Minnie", "Pato", "Princesa", "Bruja", 
            "Hada", "Ogro", "Dragón", "Unicornio", "Sirena", 
            "Pirata", "Ninja", "Samurai", "Vikingo", "Vaquero", 
            "Indio", "Robot", "Alienígena", "Astronauta", "Zombi", 
            "Vampiro", "Fantasma", "Esqueleto", "Momia", "Frankenstein", 
            "Drácula", "Tarzán", "Pinocho", "Cenicienta", "Blancanieves", 
            "Aladino", "Genio", "Pitufo", "Minion", "Dinosaurio", 
            "Tiranosaurio", "Godzilla", "King Kong", "Harry Potter", "Yoda", 
            "Darth Vader", "Sherlock Holmes", "Quijote", "Santa Claus", "Grinch", 
            "Inodoro", "Papel", "Desatascador", "Escobilla", "Pasta", 
            "Hilo", "Jabón", "Champú", "Toalla", "Espejo", 
            "Peine", "Secadora", "Maquillaje", "Labial", "Esmalte", 
            "Cortauñas", "Hisopo", "Curita", "Termómetro", "Jarabe", 
            "Inyección", "Pastilla", "Gota", "Venda", "Muleta", 
            "Silla de ruedas", "Lupa", "Mapa", "Brújula", "Mochila", 
            "Maleta", "Pasaporte", "Boleto", "Cámara", "Celular", 
            "Cargador", "Audífono", "Computadora", "Teclado", "Mouse", 
            "Pantalla", "Impresora", "USB", "Wifi", "Internet", 
            "Batería", "Foco", "Enchufe", "Cable", "Candado", 
            "Casa", "Edificio", "Escuela", "Hospital", "Comisaría", 
            "Banco", "Restaurante", "Cine", "Parque", "Plaza", 
            "Estadio", "Gimnasio", "Piscina", "Playa", "Mar", 
            "Ola", "Arena", "Sol", "Luna", "Nube", 
            "Lluvia", "Trueno", "Rayo", "Arcoíris", "Viento", 
            "Nieve", "Granizo", "Montaña", "Volcán", "Terremoto", 
            "Tsunami", "Huracán", "Tornado", "Bosque", "Árbol", 
            "Flor", "Rosa", "Jardín", "Granja", "Zoológico", 
            "Circo", "Feria", "Museo", "Biblioteca", "Aeropuerto", 
            "Avión", "Helicóptero", "Barco", "Submarino", "Tren", 
            "Hambre", "Sed", "Sueño", "Pesadilla", "Miedo", 
            "Risa", "Llanto", "Estornudo", "Hipo", "Bostezo", 
            "Picazón", "Dolor", "Fiebre", "Gripe", "Alergia", 
            "Caspa", "Piojo", "Sudor", "Olor", "Ruido", 
            "Silencio", "Música", "Baile", "Fiesta", "Piñata", 
            "Torta", "Vela", "Globo", "Confeti", "Disfraz", 
            "Máscara", "Juguete", "Muñeca", "Pelota", "Bicicleta", 
            "Patineta", "Patín", "Columpio", "Resbaladilla", "Videojuego", 
            "Película", "Noticia", "Chisme", "Secreto", "Mentira", 
            "Verdad", "Promesa", "Pecado", "Perdón", "Cielo"
        ];

        const App = () => {
            // --- ESTADOS ---
            const [phase, setPhase] = useState('SETUP');
            
            // Config
            const [team1Name, setTeam1Name] = useState('Equipo Rojo');
            const [team2Name, setTeam2Name] = useState('Equipo Verde');
            const [turnDurationMinutes, setTurnDurationMinutes] = useState(1);
            const [wordListInput, setWordListInput] = useState(DEFAULT_WORDS.join(', '));
            const [showWordList, setShowWordList] = useState(false);
            
            const [activeWordList, setActiveWordList] = useState([...DEFAULT_WORDS]);
            const [availableWords, setAvailableWords] = useState([]);

            // Partida
            const [currentRound, setCurrentRound] = useState(1);
            const [maxRounds] = useState(5);
            
            // Control de turnos
            const [activeTeamIndex, setActiveTeamIndex] = useState(0); // 0 o 1
            const [roundStarterIndex, setRoundStarterIndex] = useState(0); // Quién empieza la ronda actual
            
            // Puntajes
            const [roundWins, setRoundWins] = useState([0, 0]);
            const [currentTurnScores, setCurrentTurnScores] = useState([0, 0]);
            const [turnHistory, setTurnHistory] = useState([]);

            // Gameplay
            const [timeLeft, setTimeLeft] = useState(0);
            const [currentWord, setCurrentWord] = useState('');
            const [isPaused, setIsPaused] = useState(false);
            
            const timerRef = useRef(null);

            // --- LÓGICA ---

            const startGame = () => {
                const wordsArray = wordListInput.split(',').map(w => w.trim()).filter(w => w.length > 0);
                if (wordsArray.length < 5) {
                    alert("Por favor ingresa al menos 5 palabras.");
                    return;
                }
                setActiveWordList(wordsArray);
                setAvailableWords([...wordsArray]);
                setRoundWins([0, 0]);
                setCurrentTurnScores([0, 0]);
                setTurnHistory([]);
                setCurrentRound(1);
                
                // Reiniciar quien empieza: Ronda 1 empieza Equipo 1 (índice 0)
                setRoundStarterIndex(0);
                setActiveTeamIndex(0);
                
                setPhase('PRE_TURN');
            };

            useEffect(() => {
                if (phase === 'PLAYING' && timeLeft > 0 && !isPaused) {
                    timerRef.current = setTimeout(() => {
                        setTimeLeft(prev => prev - 1);
                    }, 1000);
                } else if (timeLeft === 0 && phase === 'PLAYING') {
                    endTurn();
                }
                return () => clearTimeout(timerRef.current);
            }, [timeLeft, phase, isPaused]);

            const startTurn = () => {
                setTimeLeft(turnDurationMinutes * 60);
                pickRandomWord();
                setPhase('PLAYING');
            };

            const pickRandomWord = () => {
                let pool = availableWords;
                if (pool.length === 0) {
                    pool = [...activeWordList];
                    setAvailableWords(pool);
                }
                const randomIndex = Math.floor(Math.random() * pool.length);
                const word = pool[randomIndex];
                const newPool = [...pool];
                newPool.splice(randomIndex, 1);
                setAvailableWords(newPool);
                setCurrentWord(word);
            };

            const handleAnswer = (isCorrect) => {
                const points = isCorrect ? 1 : -1;
                setCurrentTurnScores(prev => {
                    const newScores = [...prev];
                    newScores[activeTeamIndex] += points;
                    return newScores;
                });
                pickRandomWord();
            };

            const endTurn = () => {
                setPhase('TURN_SUMMARY');
            };

            const nextStep = () => {
                // Verificar si ya jugaron los dos equipos en esta ronda.
                // Si el equipo que acaba de jugar (activeTeamIndex) es el mismo que EMPEZÓ la ronda (roundStarterIndex),
                // significa que falta el segundo equipo.
                if (activeTeamIndex === roundStarterIndex) {
                    // Cambiamos al otro equipo
                    setActiveTeamIndex(1 - activeTeamIndex);
                    setPhase('PRE_TURN');
                } else {
                    // Si el que acaba de jugar NO es el que empezó, entonces ya jugaron los dos (el que empezó y el segundo).
                    finishRound();
                }
            };

            const finishRound = () => {
                const scoreTeam1 = currentTurnScores[0];
                const scoreTeam2 = currentTurnScores[1];
                let winnerIndex = -1;

                if (scoreTeam1 > scoreTeam2) winnerIndex = 0;
                if (scoreTeam2 > scoreTeam1) winnerIndex = 1;

                if (winnerIndex !== -1) {
                    setRoundWins(prev => {
                        const newWins = [...prev];
                        newWins[winnerIndex] += 1;
                        return newWins;
                    });
                }

                setTurnHistory(prev => [
                    ...prev, 
                    { 
                        round: currentRound, 
                        scores: [...currentTurnScores], 
                        winnerIndex 
                    }
                ]);

                setPhase('ROUND_SUMMARY');
            };

            const startNextRound = () => {
                if (currentRound >= maxRounds) {
                    setPhase('GAME_OVER');
                } else {
                    setCurrentRound(prev => prev + 1);
                    setCurrentTurnScores([0, 0]);
                    
                    // Lógica para alternar inicio:
                    // El que terminó la ronda anterior (el que jugó segundo) es el que empieza ahora.
                    // El segundo en jugar es siempre (1 - roundStarterIndex).
                    // Por tanto, el nuevo starter es (1 - roundStarterIndex).
                    const nextStarter = 1 - roundStarterIndex;
                    
                    setRoundStarterIndex(nextStarter);
                    setActiveTeamIndex(nextStarter);
                    
                    setPhase('PRE_TURN');
                }
            };

            const endGameEarly = () => {
                setPhase('GAME_OVER');
            };

            const formatTime = (seconds) => {
                const m = Math.floor(seconds / 60);
                const s = seconds % 60;
                return `${m}:${s < 10 ? '0' : ''}${s}`;
            };

            // --- RENDER ---
            
            const renderHeader = () => (
                <div className="w-full flex justify-between items-center p-4 bg-white shadow-sm border-b border-gray-200">
                    <div className="flex items-center gap-2 font-bold text-gray-700">
                        <IconUsers size={20} />
                        <span>Charada MF</span>
                    </div>
                    {phase !== 'SETUP' && phase !== 'GAME_OVER' && (
                        <button 
                            onClick={endGameEarly}
                            className="flex items-center gap-2 px-3 py-1 bg-red-100 text-red-600 rounded-full hover:bg-red-200 transition-colors text-sm font-semibold"
                        >
                            <IconStop size={16} /> Finalizar
                        </button>
                    )}
                </div>
            );

            // 1. SETUP
            if (phase === 'SETUP') {
                return (
                    <div className="min-h-screen bg-indigo-50 font-sans text-gray-800 flex flex-col">
                        {renderHeader()}
                        <div className="max-w-2xl mx-auto p-6 w-full">
                            <div className="bg-white rounded-2xl shadow-xl p-6 md:p-8">
                                <h1 className="text-3xl font-extrabold text-center mb-8 text-indigo-600 flex justify-center items-center gap-3">
                                    <IconSettings size={32} /> Configuración
                                </h1>

                                <div className="space-y-6">
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-semibold text-gray-600 mb-2">Equipo 1</label>
                                            <input 
                                                type="text" 
                                                value={team1Name} 
                                                onChange={(e) => setTeam1Name(e.target.value)}
                                                className="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none bg-red-50 text-red-800 font-bold"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-semibold text-gray-600 mb-2">Equipo 2</label>
                                            <input 
                                                type="text" 
                                                value={team2Name} 
                                                onChange={(e) => setTeam2Name(e.target.value)}
                                                className="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none bg-green-50 text-green-800 font-bold"
                                            />
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-semibold text-gray-600 mb-2">Duración Turno (minutos)</label>
                                        <input 
                                            type="number" 
                                            min="1" 
                                            max="10"
                                            value={turnDurationMinutes} 
                                            onChange={(e) => setTurnDurationMinutes(parseInt(e.target.value) || 1)}
                                            className="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none"
                                        />
                                    </div>

                                    <div>
                                        <div className="flex justify-between items-end mb-2">
                                            <label className="block text-sm font-semibold text-gray-600">
                                                Lista de Palabras
                                            </label>
                                            <button 
                                                onClick={() => setShowWordList(!showWordList)}
                                                className="text-xs font-bold text-indigo-600 hover:text-indigo-800 underline flex items-center gap-1"
                                            >
                                                <IconEdit size={14} /> {showWordList ? 'Ocultar Lista' : 'Ver/Editar Lista'}
                                            </button>
                                        </div>

                                        {showWordList ? (
                                            <>
                                                <div className="mb-2 text-right">
                                                    <span className="text-xs text-indigo-500 bg-indigo-50 px-2 py-1 rounded-full">
                                                        {wordListInput.split(',').length} palabras detectadas
                                                    </span>
                                                </div>
                                                <textarea 
                                                    rows="6"
                                                    value={wordListInput}
                                                    onChange={(e) => setWordListInput(e.target.value)}
                                                    className="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none text-sm"
                                                    placeholder="Ingresa palabras separadas por comas..."
                                                />
                                            </>
                                        ) : (
                                            <div className="p-4 bg-gray-50 border border-gray-200 rounded-xl text-center text-gray-500 text-sm italic">
                                                Se usarán {wordListInput.split(',').length} palabras predeterminadas. <br/>
                                                Haz clic en "Ver/Editar Lista" para modificarlas.
                                            </div>
                                        )}
                                    </div>

                                    <button 
                                        onClick={startGame}
                                        className="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-xl font-bold shadow-lg transform transition hover:scale-[1.02] flex justify-center items-center gap-2"
                                    >
                                        <IconPlay size={24} /> Iniciar Juego
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // 2. PRE_TURN
            if (phase === 'PRE_TURN') {
                const isTeam1 = activeTeamIndex === 0;
                const currentTeamName = isTeam1 ? team1Name : team2Name;
                
                return (
                    <div className={`min-h-screen flex flex-col ${isTeam1 ? 'bg-red-50' : 'bg-green-50'}`}>
                        {renderHeader()}
                        <div className="flex-1 flex flex-col items-center justify-center p-6 text-center animate-fadeIn">
                            <div className="mb-4 text-xl font-medium text-gray-500 uppercase tracking-widest">
                                Ronda {currentRound} / {maxRounds}
                            </div>
                            
                            <div className="mb-8">
                                <h2 className="text-3xl text-gray-700 mb-2">Turno de:</h2>
                                <div className={`text-6xl font-black ${isTeam1 ? 'text-red-600' : 'text-green-600'} mb-4 drop-shadow-sm`}>
                                    {currentTeamName}
                                </div>
                                <p className="text-gray-500 text-lg">Preparen a su actor.</p>
                            </div>

                            <div className="bg-white p-6 rounded-2xl shadow-lg mb-8 w-full max-w-sm">
                                <div className="flex justify-between text-gray-600 font-semibold border-b pb-2 mb-2">
                                    <span>Rondas Ganadas:</span>
                                </div>
                                <div className="flex justify-between items-center text-xl">
                                    <span className="text-red-600 font-bold">{team1Name}: {roundWins[0]}</span>
                                    <span className="text-gray-300">|</span>
                                    <span className="text-green-600 font-bold">{team2Name}: {roundWins[1]}</span>
                                </div>
                            </div>

                            <button 
                                onClick={startTurn}
                                className={`px-10 py-5 rounded-2xl shadow-xl text-2xl font-bold text-white transform transition hover:scale-105 flex items-center gap-3 ${isTeam1 ? 'bg-red-600 hover:bg-red-700' : 'bg-green-600 hover:bg-green-700'}`}
                            >
                                <IconPlay size={32} /> ¡Comenzar!
                            </button>
                        </div>
                    </div>
                );
            }

            // 3. PLAYING
            if (phase === 'PLAYING') {
                const isTeam1 = activeTeamIndex === 0;
                
                return (
                    <div className="min-h-screen bg-gray-900 text-white flex flex-col">
                        <div className="flex justify-between items-center p-4 bg-gray-800 border-b border-gray-700">
                            <div className={`font-bold text-lg ${isTeam1 ? 'text-red-400' : 'text-green-400'}`}>
                                {isTeam1 ? team1Name : team2Name}
                            </div>
                            <div className="font-mono text-2xl font-bold bg-gray-700 px-4 py-1 rounded-lg flex items-center gap-2">
                                <IconTimer size={20} /> {formatTime(timeLeft)}
                            </div>
                            <div className="text-xl font-bold text-yellow-400">
                                Pts: {currentTurnScores[activeTeamIndex]}
                            </div>
                        </div>

                        <div className="flex-1 flex flex-col items-center justify-center p-6 text-center">
                            <p className="text-gray-400 mb-4 uppercase tracking-widest text-sm">Palabra:</p>
                            <div className="bg-white text-gray-900 rounded-3xl p-8 w-full max-w-3xl shadow-2xl mb-8 transform transition-all">
                                <h2 className="text-5xl md:text-7xl font-black break-words leading-tight">
                                    {currentWord}
                                </h2>
                            </div>
                        </div>

                        <div className="h-1/3 min-h-[200px] flex">
                            <button 
                                onClick={() => handleAnswer(false)}
                                className="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 transition-colors flex flex-col items-center justify-center border-r border-red-700"
                            >
                                <IconX size={64} className="mb-2 text-red-900 opacity-50" />
                                <span className="text-2xl font-bold uppercase tracking-wider">PASAR / ERROR</span>
                                <span className="text-sm opacity-75">-1 Punto</span>
                            </button>
                            
                            <button 
                                onClick={() => handleAnswer(true)}
                                className="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 transition-colors flex flex-col items-center justify-center border-l border-green-700"
                            >
                                <IconCheck size={64} className="mb-2 text-green-900 opacity-50" />
                                <span className="text-2xl font-bold uppercase tracking-wider">CORRECTO</span>
                                <span className="text-sm opacity-75">+1 Punto</span>
                            </button>
                        </div>
                    </div>
                );
            }

            // 4. TURN_SUMMARY
            if (phase === 'TURN_SUMMARY') {
                const isTeam1 = activeTeamIndex === 0;
                const score = currentTurnScores[activeTeamIndex];
                
                return (
                    <div className="min-h-screen bg-indigo-50 flex flex-col">
                        {renderHeader()}
                        <div className="flex-1 flex flex-col items-center justify-center p-6 text-center animate-slideUp">
                            <div className="bg-white p-8 rounded-3xl shadow-xl w-full max-w-md">
                                <h2 className="text-2xl font-bold text-gray-500 mb-2">¡Tiempo Terminado!</h2>
                                <h3 className={`text-4xl font-black mb-6 ${isTeam1 ? 'text-red-600' : 'text-green-600'}`}>
                                    {isTeam1 ? team1Name : team2Name}
                                </h3>
                                
                                <div className="bg-gray-100 rounded-xl p-6 mb-8">
                                    <p className="text-gray-500 text-lg mb-2">Puntos del turno:</p>
                                    <div className="text-6xl font-bold text-indigo-600">
                                        {score}
                                    </div>
                                </div>

                                <button 
                                    onClick={nextStep}
                                    className="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-xl font-bold shadow-md"
                                >
                                    Continuar
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            // 5. ROUND_SUMMARY
            if (phase === 'ROUND_SUMMARY') {
                const lastRound = turnHistory[turnHistory.length - 1];
                if (!lastRound) return null;

                const winnerIdx = lastRound.winnerIndex;
                const isTie = winnerIdx === -1;
                const winnerName = isTie ? 'Empate' : (winnerIdx === 0 ? team1Name : team2Name);
                const winnerColor = isTie ? 'text-gray-600' : (winnerIdx === 0 ? 'text-red-600' : 'text-green-600');

                return (
                    <div className="min-h-screen bg-yellow-50 flex flex-col">
                        {renderHeader()}
                        <div className="flex-1 flex flex-col items-center justify-center p-4">
                            <div className="bg-white p-8 rounded-3xl shadow-2xl w-full max-w-lg text-center border-4 border-yellow-200">
                                <div className="mb-6 flex justify-center">
                                    <IconTrophy size={64} className="text-yellow-500" />
                                </div>
                                
                                <h2 className="text-3xl font-extrabold text-gray-800 mb-6 uppercase tracking-wider">
                                    Fin Ronda {currentRound}
                                </h2>

                                <div className="space-y-4 mb-8">
                                    <div className="flex justify-between items-center p-4 bg-red-50 rounded-lg border border-red-100">
                                        <span className="font-bold text-red-800 text-lg">{team1Name}</span>
                                        <span className="font-black text-2xl text-red-600">{lastRound.scores[0]} pts</span>
                                    </div>
                                    <div className="flex justify-between items-center p-4 bg-green-50 rounded-lg border border-green-100">
                                        <span className="font-bold text-green-800 text-lg">{team2Name}</span>
                                        <span className="font-black text-2xl text-green-600">{lastRound.scores[1]} pts</span>
                                    </div>
                                </div>

                                <div className="mb-8 p-4 bg-indigo-50 rounded-xl">
                                    <p className="text-sm text-gray-500 uppercase font-bold mb-2">Ganador de la Ronda</p>
                                    <h3 className={`text-3xl font-black ${winnerColor}`}>
                                        {isTie ? "¡EMPATE!" : `"${winnerName}"`}
                                    </h3>
                                </div>

                                <button 
                                    onClick={startNextRound}
                                    className="w-full py-4 bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl text-xl font-bold shadow-lg transform transition hover:scale-105"
                                >
                                    {currentRound >= maxRounds ? 'Ver Resultado Final' : `Siguiente Ronda`}
                                </button>
                                {currentRound < maxRounds && (
                                    <p className="mt-2 text-gray-400 text-sm">
                                        Nota: En la siguiente ronda comenzará {activeTeamIndex === 0 ? team2Name : team1Name}
                                    </p>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            // 6. GAME_OVER
            if (phase === 'GAME_OVER') {
                const t1Wins = roundWins[0];
                const t2Wins = roundWins[1];
                let finalWinner = "¡EMPATE!";
                let finalColor = "text-gray-600";
                
                if (t1Wins > t2Wins) {
                    finalWinner = team1Name;
                    finalColor = "text-red-600";
                } else if (t2Wins > t1Wins) {
                    finalWinner = team2Name;
                    finalColor = "text-green-600";
                }

                return (
                    <div className="min-h-screen bg-indigo-900 flex flex-col text-white">
                        <div className="flex-1 flex flex-col items-center justify-center p-4">
                            <div className="bg-white text-gray-800 p-8 rounded-3xl shadow-2xl w-full max-w-2xl text-center">
                                <h1 className="text-4xl font-extrabold text-indigo-700 mb-2">Juego Finalizado</h1>
                                
                                <div className="flex justify-center items-center gap-8 mb-8 mt-8">
                                    <div className="text-center">
                                        <div className="text-6xl font-black text-red-500">{t1Wins}</div>
                                        <div className="font-bold text-red-700">{team1Name}</div>
                                    </div>
                                    <div className="text-gray-300 text-4xl font-light">-</div>
                                    <div className="text-center">
                                        <div className="text-6xl font-black text-green-500">{t2Wins}</div>
                                        <div className="font-bold text-green-700">{team2Name}</div>
                                    </div>
                                </div>

                                <div className="bg-indigo-50 p-6 rounded-2xl mb-8">
                                    <p className="text-gray-500 font-bold uppercase text-sm mb-2">Campeón:</p>
                                    <h2 className={`text-5xl font-black ${finalColor} break-words`}>
                                        {finalWinner}
                                    </h2>
                                </div>

                                <div className="mb-8 text-left max-h-40 overflow-y-auto border rounded-lg p-2">
                                    <table className="w-full text-sm">
                                        <thead>
                                            <tr className="text-gray-500 border-b">
                                                <th className="pb-2 text-left">Ronda</th>
                                                <th className="pb-2 text-center">{team1Name}</th>
                                                <th className="pb-2 text-center">{team2Name}</th>
                                                <th className="pb-2 text-right">Ganador</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {turnHistory.map((turn, i) => (
                                                <tr key={i} className="border-b last:border-0">
                                                    <td className="py-2 text-gray-600">R{turn.round}</td>
                                                    <td className="py-2 text-center font-bold text-red-600">{turn.scores[0]}</td>
                                                    <td className="py-2 text-center font-bold text-green-600">{turn.scores[1]}</td>
                                                    <td className="py-2 text-right text-gray-600">
                                                        {turn.winnerIndex === -1 ? 'Empate' : (turn.winnerIndex === 0 ? team1Name : team2Name)}
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>

                                <button 
                                    onClick={() => setPhase('SETUP')}
                                    className="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-xl font-bold flex items-center justify-center gap-2"
                                >
                                    <IconRotate size={24} /> Nuevo Juego
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return null;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>